extends _base

append scripts
  script(src='/static/js/tinymce/tinymce.min.js')
  script.
    tinymce.init({
      selector: 'textarea',
      content_css: '/static/css/editor.css',
      menubar: false,
      plugins: 'link image code',
      toolbar: 'styleselect | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist | link unlink image | code'
    });

block body
  .edit-post
    form(method='post')
      if data.templates.length > 1
        .grid-container
          .threequarter
            label Title
              input(type='text', name='title', value=data.post.title)
          .onequarter
            label Template
              span.styled-select: select(name='template')
                each template in data.templates
                  option(value=template, selected=(data.post.template==template))= template.charAt(0).toUpperCase() + template.slice(1)
      else
        label Title
          input(type='text', name='title', value=data.post.title)
        input(type='hidden', name='template', value=data.templates[0])
      label Content
        textarea(name='content', rows='20')= data.post.content

      section.settings-menu
        .content
          h3 Settings
          a.close.fa.fa-times
          .grid-container
            .half
              label Date
                input(type='date', name='date', value=data.post.date)
            .half
              label Slug
                input(type='text', name='slug', value=data.post.slug, data-update-slug-from=data.isnew?'[name=title]':null)

      .submit-block
        a(data-open='.settings-menu').fa.fa-cog.settings
        if data.saved
          span.info.success-color Saved!
        if !data.isnew
          a.delete-color(href='/admin/delete/'+data.post.slug) Delete
        input.main-button(type='submit', value='Save')
